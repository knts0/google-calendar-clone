<div class="weekly-calendar-table">
  <!--  week days-->
  <div class="header">
    <div class="header__blank-cell">
    </div>
    <div
      class  = "header__day-cell"
      *ngFor = "let item of days"
    >
      <div class="header__weekday">
        {{ item.weekday }}
      </div>
      <div
        class         = "header__day"
        [class.today] = "item.day.isSame(today, 'day')"
      >{{ item.day | date: 'd' }}</div>
    </div>
  </div>

  <!-- days -->
  <div class="body">
    <div class="body__hours">
      <div
        class  = "body__hour"
        *ngFor = "let hour of hours"
      >
        <div class="body__hour-text">
          {{ hour | number: '2.0-0' }}:00
        </div>
      </div>
    </div>

    <div
      class="grid-view"
    >
      <div
        class="grid-view__day"
        *ngFor="let item of days"
      >
        <!-- for detecting mouse events -->
        <div class="grid-view__detecting-mouse-events"
          (mousedown) = "onMouseDown($event, item)"
          (mouseup)   = "onMouseUp($event, item)"
          (mousemove) = "onMouseMove($event)"
          [class.cursor-move] = "isMovingMouse"
        ></div>

        <!-- timeline frame -->
        <div
          class          = "grid-view__time-frame"
          *ngFor         = "let hour of hours"
          [style.top.px] = "getTopOfTimelineFrame(hour)"
        >
        </div>

        <div class="grid-view__events">
          <!-- registered events -->
          <div
            *ngFor  = "let eventItem of item.eventItems"
            class   = "grid-view__event"
            [style] = "eventItem.style"
          >
            {{ eventItem.event.title }}
          </div>

          <!-- Preview event -->
          <div
            *ngIf             = "newEventPreview != null && item.day === newEventPreview.day"
            class             = "grid-view__preview-event"
            [style.top.px]    = "newEventPreview.style.top"
            [style.height.px] = "newEventPreview.style.height"
          >
            無題
            <br>
            {{ startHour }}:00〜{{ endHour }}:00
          </div>

          <!-- registered events click area (transparent) -->
          <div
            *ngFor  = "let eventItem of item.eventItems"
            class   = "grid-view__event-click-area"
            [style] = "eventItem.style"
            (click) = "onClickEvent(eventItem.event)"
          >
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
